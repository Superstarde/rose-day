<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For My Valentine ‚ù§Ô∏è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600;700&family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* --- Global Styles --- */
        body {
            font-family: 'Poppins', sans-serif;
            background: #000;
            overflow: hidden; 
            color: #fce7f3;
            margin: 0;
            height: 100vh;
        }
        .font-dancing { font-family: 'Dancing Script', cursive; }
        .font-playfair { font-family: 'Playfair Display', serif; }

        /* --- Unified Button Style (Applied to all) --- */
        .btn-primary {
            background: linear-gradient(to right, #db2777, #e11d48); /* Pink-600 to Rose-600 */
            color: white;
            font-weight: bold;
            border-radius: 9999px; /* Full pill shape */
            padding: 12px 32px;
            font-size: 1.1rem;
            border: 2px solid #f472b6; /* Pink-400 */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
            z-index: 50;
            display: inline-block;
        }
        .btn-primary:active { transform: scale(0.95); }
        .btn-primary:hover { 
            transform: scale(1.05); 
            box-shadow: 0 0 20px rgba(236, 72, 153, 0.6);
        }

        /* --- Screens / Sections --- */
        .section {
            display: none;
            height: 100vh;
            width: 100vw;
            position: fixed;
            top: 0;
            left: 0;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.8s ease-in-out;
            z-index: 10;
            overflow: hidden;
        }
        .section.active {
            display: flex;
            opacity: 1;
        }

        /* --- Backgrounds --- */
        .bg-intro { background: radial-gradient(circle at center, #2a0a18 0%, #000000 100%); }
        .bg-wish { background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%); color: #d63384; }
        .bg-photos { background: linear-gradient(to bottom, #2c0e18, #5a192c); }
        .bg-letter { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }

        /* --- Carousel Styles --- */
        .carousel-container {
            position: relative;
            width: 100%;
            height: 45vh; /* Keep height contained */
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1000px;
            margin-bottom: 20px;
        }
        
        .carousel-item {
            position: absolute;
            width: 65vw; 
            max-width: 280px;
            height: 40vh; /* Responsive height */
            max-height: 420px;
            border-radius: 15px;
            background: #fff;
            overflow: hidden;
            cursor: pointer;
            border: 3px solid #ec4899; 
            box-shadow: 0 0 15px #ec4899;
        }

        .carousel-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        /* --- Falling Petals --- */
        .petal {
            position: fixed;
            top: -10vh;
            font-size: 1.5rem;
            pointer-events: none;
            z-index: 50;
            animation: fall linear forwards;
        }
        @keyframes fall {
            to { transform: translateY(110vh) rotate(720deg); }
        }

        /* --- ENVELOPE STYLES --- */
        .envelope-wrapper {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100%;
            perspective: 1000px;
        }

        .envelope {
            width: 85vw;
            max-width: 320px;
            height: 200px;
            background: #be123c;
            position: relative;
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            z-index: 20;
        }

        .envelope-flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
            border-left: 42.5vw solid transparent;
            border-right: 42.5vw solid transparent;
            border-top: 130px solid #e11d48;
            transform-origin: top;
            z-index: 6;
        }
        @media(min-width: 380px) {
            .envelope-flap { border-left: 160px solid transparent; border-right: 160px solid transparent; }
        }

        .envelope-pocket {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 0;
            border-left: 42.5vw solid transparent;
            border-right: 42.5vw solid transparent;
            border-bottom: 140px solid #fb7185;
            z-index: 5;
        }
        @media(min-width: 380px) {
            .envelope-pocket { border-left: 160px solid transparent; border-right: 160px solid transparent; }
        }

        /* The Paper/Letter */
        .letter-content {
            position: absolute;
            bottom: 10px;
            width: 92%; /* Wider to fit text */
            max-width: 500px;
            background: #fffdf7;
            padding: 15px; /* Less padding to fit text */
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 3;
            transform: scale(0.8);
            opacity: 0;
            overflow-y: auto; 
            border-radius: 5px;
            scrollbar-width: none; 
        }

        /* Navigation Buttons */
        .nav-btn {
            background: rgba(236, 72, 153, 0.8);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            z-index: 30;
        }
    </style>
</head>
<body>

    <audio id="bgMusic" loop>
        <source src="love_song.mp3" type="audio/mpeg">
    </audio>

    <div id="hearts-container" class="fixed inset-0 pointer-events-none z-0"></div>

    <div id="screen-1" class="section active bg-intro">
        <h1 class="text-5xl md:text-8xl font-dancing text-pink-500 mb-6 drop-shadow-lg text-center px-4">
            For Amna...
        </h1>
        <p class="text-pink-200 text-lg mb-10 font-light tracking-wide">I have a surprise for you</p>
        
        <button onclick="startJourney()" class="btn-primary">
            Tap to Open ‚ù§Ô∏è
        </button>
    </div>

    <div id="screen-2" class="section bg-wish text-center px-4">
        <h1 class="text-5xl md:text-7xl font-dancing font-bold text-pink-700 mb-4 scale-0 leading-tight" id="wish-title">
            Happy<br>Valentine's<br>Day! üåπ
        </h1>
        <p class="text-lg text-rose-800 mt-2 opacity-0" id="wish-sub">
            You make my life beautiful.
        </p>
        <button onclick="nextSection(3)" class="btn-primary mt-10 opacity-0" id="wish-btn">
            See Our Memories ‚û°Ô∏è
        </button>
    </div>

    <div id="screen-3" class="section bg-photos flex flex-col items-center justify-center">
        
        <h2 class="text-3xl md:text-4xl font-dancing text-pink-300 mb-4">Our Moments</h2>

        <div class="carousel-container">
            <button class="nav-btn absolute left-2 md:left-10" onclick="moveSlide(-1)">‚ùÆ</button>
            <div id="track" class="w-full h-full flex justify-center items-center relative"></div>
            <button class="nav-btn absolute right-2 md:right-10" onclick="moveSlide(1)">‚ùØ</button>
        </div>

        <div class="h-16 flex items-center justify-center px-4 text-center mb-2 w-full">
            <p id="caption" class="text-lg md:text-xl font-playfair text-pink-200 italic transition-opacity duration-300"></p>
        </div>

        <button onclick="nextSection(4)" class="btn-primary mt-2 text-sm px-6 py-2">
            One Last Thing... ‚Üì
        </button>
    </div>

    <div id="screen-4" class="section bg-letter">
        <div id="petals-container"></div>

        <div class="envelope-wrapper">
            <div class="envelope" id="envelope">
                
                <div class="envelope-flap" id="flap"></div>
                <div class="envelope-pocket" id="pocket"></div>

                <div class="letter-content" id="letter">
                    <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 w-32 h-8 bg-pink-200/40 -rotate-1"></div>
                    
                    <h2 class="text-2xl font-dancing text-center text-rose-600 mb-2 mt-2">Meri Shayaari, Meri Amna...</h2>
                    
                    <div class="space-y-3 text-gray-800 font-playfair leading-snug text-sm text-justify">
                        <p class="text-center italic text-rose-500 font-semibold text-sm">
                            "Log kehte hain mohabbat ek baar hoti hai,<br>
                            Par main jab jab aapko dekhta hoon, mujhe har baar hoti hai."
                        </p>

                        <p>
                            Amna, log Valentine's Day par tohfe dete hain, par main aapko apna aane wala har lamha dena chahta hoon. Aap mere liye sirf ek rishta nahi ho, aap sukoon ka wo thikana ho. 
                        </p>

                        <p>
                            Jab hum saath hote hain, waqt jaise thamm sa jata hai. Main chahta hoon ki humari ye kahani sirf aaj ke din tak na rahe‚Äîmain ise har subah aapki chai ki chuski mein likhna chahta hoon.
                        </p>

                        <p>
                            Aapki ek muskurahat mere pure din ki kamai hai. Vaada hai mera, duniya ki bheed mein kabhi aapka haath nahi chodunga.
                        </p>

                        <div class="pt-2 text-center">
                            <p class="text-lg font-dancing text-rose-600 font-bold">
                                Happy Valentine's Day! üëë
                            </p>
                        </div>
                        
                        <div class="mt-4 pt-2 border-t border-dashed border-rose-200">
                            <p class="text-right font-bold text-rose-600">
                                <span class="text-xl font-dancing">Dev</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <button onclick="location.reload()" class="btn-primary fixed top-5 right-5 text-xs px-4 py-2" style="padding: 8px 16px; font-size: 12px;">
            Restart ‚Üª
        </button>
    </div>

    <script>
        const slides = [
            { img: "pic1.png", caption: "I love you more than words can say üíñ" },
            { img: "pic2.jpg", caption: "You are full of surprises! üéÅ" },
            { img: "pic3.jpg", caption: "Your smile is my daily motivation ‚ú®" },
            { img: "pic4.png", caption: "Our most precious memory together üåü" },
            { img: "pic5.png", caption: "You are my favorite notification üì±‚ù§Ô∏è" },
            { img: "pic6.jpg", caption: "Every moment with you is a treasure üíé" },
            { img: "pic7.png", caption: "My heart is wherever you are üè†‚ù§Ô∏è" },
            { img: "pic8.jpg", caption: "To many more years of us! ü•Ç" }
        ];

        let currentSlide = 0;
        const bgMusic = document.getElementById('bgMusic');

        function startJourney() {
            bgMusic.play().catch(e => console.log("Audio interaction needed"));
            nextSection(2);
            setTimeout(() => {
                gsap.to("#wish-title", { scale: 1, duration: 1, ease: "elastic.out(1, 0.3)" });
                gsap.to("#wish-sub", { opacity: 1, y: 0, delay: 0.5, duration: 1 });
                gsap.to("#wish-btn", { opacity: 1, y: 0, delay: 1.5, duration: 1 });
            }, 500);
        }

        function nextSection(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            const next = document.getElementById(`screen-${id}`);
            next.classList.add('active');
            
            if(id === 3) renderCarousel();
            if(id === 4) startLetterAnimation();
        }

        function renderCarousel() {
            const track = document.getElementById('track');
            track.innerHTML = '';
            slides.forEach((slide, index) => {
                const el = document.createElement('div');
                el.className = 'carousel-item';
                
                const img = document.createElement('img');
                img.src = slide.img;
                img.onerror = function() {
                    this.style.display = 'none';
                    const errDiv = document.createElement('div');
                    Object.assign(errDiv.style, {
                        width: '100%', height: '100%',
                        backgroundColor: '#fce7f3', color: '#db2777',
                        display: 'flex', alignItems: 'center', justifyContent: 'center',
                        textAlign: 'center', padding: '10px', fontSize: '12px'
                    });
                    errDiv.innerHTML = `<strong>Photo?</strong><br>${slide.img}`;
                    el.appendChild(errDiv);
                };
                el.onclick = () => moveSlide(index - currentSlide);
                el.appendChild(img);
                track.appendChild(el);
            });
            updateCarousel();
        }

        function moveSlide(direction) {
            currentSlide = (currentSlide + direction + slides.length) % slides.length;
            updateCarousel();
        }

        function updateCarousel() {
            const items = document.querySelectorAll('.carousel-item');
            const captionEl = document.getElementById('caption');
            captionEl.style.opacity = 0;

            items.forEach((item, index) => {
                const offset = index - currentSlide;
                let zIndex = 0, transform = '', opacity = 0, pointerEvents = 'none';
                
                let visualOffset = offset;
                if(offset > slides.length/2) visualOffset -= slides.length;
                if(offset < -slides.length/2) visualOffset += slides.length;

                if (visualOffset === 0) {
                    transform = 'translateX(0) scale(1)';
                    zIndex = 10; opacity = 1; pointerEvents = 'auto';
                } else if (Math.abs(visualOffset) === 1) {
                    const xOffset = visualOffset * (window.innerWidth < 600 ? 150 : 220); 
                    transform = `translateX(${xOffset}px) scale(0.8) rotateY(${visualOffset * -15}deg)`;
                    zIndex = 5; opacity = 0.6; pointerEvents = 'auto'; 
                } else {
                    transform = `translateX(${visualOffset * 100}px) scale(0)`;
                    opacity = 0;
                }
                item.style.transform = transform;
                item.style.zIndex = zIndex;
                item.style.opacity = opacity;
                item.style.pointerEvents = pointerEvents;
            });

            setTimeout(() => {
                captionEl.textContent = slides[currentSlide].caption;
                captionEl.style.opacity = 1;
            }, 300);
        }

        function startLetterAnimation() {
            const container = document.getElementById('petals-container');
            const roseTypes = ['üåπ', 'üå∫', 'ü•Ä', 'üå∏']; 
            
            const createPetal = () => {
                const el = document.createElement('div');
                el.className = 'petal';
                el.textContent = roseTypes[Math.floor(Math.random() * roseTypes.length)];
                el.style.left = Math.random() * 100 + 'vw';
                el.style.animationDuration = Math.random() * 3 + 4 + 's';
                el.style.fontSize = Math.random() * 15 + 15 + 'px';
                container.appendChild(el);
                setTimeout(() => el.remove(), 7000);
            };
            const interval = setInterval(createPetal, 300);
            setTimeout(() => clearInterval(interval), 20000);

            const tl = gsap.timeline({ delay: 0.5 });

            tl.to("#flap", { 
                rotateX: 180, 
                duration: 1, 
                ease: "power2.inOut" 
            })
            .to("#letter", { 
                y: -120, 
                opacity: 1,
                zIndex: 4, 
                duration: 1,
                ease: "back.out(1.2)"
            })
            // Maximizing height to 85vh and scale to 1 to fit text comfortably
            .to("#letter", {
                zIndex: 50,
                y: 0,
                scale: 1,
                height: "85vh", 
                width: "92vw",
                maxWidth: "600px",
                duration: 1.5,
                ease: "power3.out"
            }, "+=0.2")
            .to(["#flap", "#pocket"], {
                opacity: 0,
                duration: 0.5
            }, "-=1.0")
            .to("#envelope", {
                backgroundColor: "rgba(190, 18, 60, 0)",
                boxShadow: "0 0 0 rgba(0,0,0,0)",
                duration: 0.5
            }, "<");
        }

        function initHearts() {
            const container = document.getElementById('hearts-container');
            setInterval(() => {
                const h = document.createElement('div');
                h.textContent = '‚ù§Ô∏è';
                Object.assign(h.style, {
                    position: 'absolute', left: Math.random() * 100 + '%',
                    top: '100%', opacity: 0.3,
                    fontSize: Math.random() * 20 + 10 + 'px',
                    transition: 'all 8s linear'
                });
                container.appendChild(h);
                setTimeout(() => {
                    h.style.top = '-10%';
                    h.style.transform = `rotate(${Math.random() * 360}deg)`;
                }, 100);
                setTimeout(() => h.remove(), 8000);
            }, 800);
        }
        initHearts();
    </script>
</body>
</html>
